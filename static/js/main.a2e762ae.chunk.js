(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(200)},124:function(e,t,a){},125:function(e,t,a){},144:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(18),i=a.n(s),c=(a(124),a(9)),o=a(10),l=a(13),u=a(11),p=a(12),h=a(31),d=(a(125),a(201)),m=a(202),f=a(203),g=a(204),y=a(205),v=a(206),k=a(207),E=a(208),z=a(209),b=(a(126),a(79)),O=a(81),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1,color:"bg-info",collapseOut:""},a.toggleCollapse=function(){document.documentElement.classList.toggle("nav-open"),a.setState({collapseOpen:!a.state.collapseOpen})},a.onCollapseExiting=function(){a.setState({collapseOut:"collapsing-out"})},a.onCollapseExited=function(){a.setState({collapseOut:""})},a.scrollToDownload=function(){document.getElementById("download-section").scrollIntoView({behavior:"smooth"})},a.localLogout=function(){sessionStorage.clear(),localStorage.clear()},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.changeColor)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.changeColor)}},{key:"render",value:function(){return r.a.createElement(d.a,{className:this.state.color,expand:"lg"},r.a.createElement(m.a,null,r.a.createElement("div",{className:"navbar-translate"},r.a.createElement(f.a,{to:"/","data-placement":"bottom",tag:h.b},"QuizTime"),r.a.createElement("button",{"aria-expanded":this.state.collapseOpen,className:"navbar-toggler navbar-toggler",onClick:this.toggleCollapse},r.a.createElement(b.a,{icon:O.a}))),r.a.createElement(g.a,{className:"justify-content-end "+this.state.collapseOut,navbar:!0,isOpen:this.state.collapseOpen,onExiting:this.onCollapseExiting,onExited:this.onCollapseExited},r.a.createElement("div",{className:"navbar-collapse-header"},r.a.createElement(y.a,null,r.a.createElement(v.a,{className:"collapse-brand",xs:"6"},"QuizTime"),r.a.createElement(v.a,{className:"collapse-close text-right",xs:"6"},r.a.createElement("button",{"aria-expanded":this.state.collapseOpen,className:"navbar-toggler",onClick:this.toggleCollapse},r.a.createElement(b.a,{icon:O.a}))))),r.a.createElement(k.a,{navbar:!0},r.a.createElement(E.a,{className:"active"},r.a.createElement(z.a,{tag:h.b,to:"/home"},"Home")),r.a.createElement(E.a,null,r.a.createElement(z.a,{tag:h.b,to:"/profile"},"My Profile")),r.a.createElement(E.a,null,r.a.createElement(z.a,{tag:h.b,to:"/create"},"Quiz Creator")),r.a.createElement(E.a,null,r.a.createElement(z.a,{href:"/",onClick:this.localLogout},"Log Out"))))))}}]),t}(r.a.Component),w=a(32),S=a(17),j=a.n(S),C=a(23),Q="https://api.spotify.com/v1",q=window.OAuth.create("spotify").access_token,N={get:{spotifyAlbumTracks:function(){return fetch("".concat(Q,"/albums/709gu2Yj2tfqmNMIEDfOPg/tracks?market=US&limit=50"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(q),"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e.items.map(function(e){return e.id})})},getUserPlaylists:function(){var e=Object(C.a)(j.a.mark(function e(){var t,a,n,r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.OAuth.create("spotify"),a=t.access_token,e.prev=2,e.next=5,fetch("https://api.spotify.com/v1/me/playlists",{headers:{Accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r.items);case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(){return e.apply(this,arguments)}}(),getPlaylistTracks:function(){var e=Object(C.a)(j.a.mark(function e(t){var a,n,r,s,i,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.OAuth.create("spotify"),n=a.access_token,e.prev=2,e.next=5,fetch("".concat(Q,"/playlists/").concat(t,"/tracks?market=US&fields=items(track(id%2Cduration_ms%2Cname%2Curi%2C%20album(name)%2Cartists(name)))&limit=100"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 5:return r=e.sent,e.next=8,r.json();case 8:return s=e.sent,i=s.items,c=i.map(function(e){return e.track}),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}(),spotifyTrackInfo:function(e){var t=window.OAuth.create("spotify").access_token;return fetch("https://api.spotify.com/v1/audio-analysis/".concat(e),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){var a=t.sections,n=a.map(function(e){return e.loudness}),r=n.findIndex(function(e){return e>-15.5});if(r<=2&&r>=0)return console.log([e,1e3*a[r].start,1]),a[r].start;if(n[0]>n[1])return 0;var s=n.slice(0,5),i=s.reduce(function(e,t){return e+t})/s.length,c=a.findIndex(function(e){return e.loudness>i});return console.log([e,1e3*a[c].start,3]),a[c].start})}},post:{toJSONServer:function(e,t){return fetch("".concat("https://calm-mesa-57338.herokuapp.com","/").concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})},spotifyNextTrack:function(){fetch("".concat(Q,"/me/player/next"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(q),"Content-Type":"application/json"},method:"POST"})}},put:{spotifyShuffle:function(e){fetch("".concat(Q,"/me/player/shuffle?state=true&device_id=").concat(e),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(q),"Content-Type":"application/json"},method:"PUT"})},startPlayback:function(){var e=Object(C.a)(j.a.mark(function e(t,a){var n,r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.OAuth.create("spotify"),r=n.access_token,e.prev=2,e.next=5,fetch("https://api.spotify.com/v1/me/player/play",{body:JSON.stringify({uris:t,position_ms:a}),headers:{Accept:"application/json",Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},method:"PUT"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,a){return e.apply(this,arguments)}}(),playOneSong:function(){var e=Object(C.a)(j.a.mark(function e(t,a,n){var r,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.OAuth.create("spotify"),s=r.access_token,e.prev=2,e.next=5,fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(n),{body:JSON.stringify({uris:[t],position_ms:a}),headers:{Accept:"application/json",Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},method:"PUT"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,a,n){return e.apply(this,arguments)}}(),pauseSong:function(){var e=Object(C.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.OAuth.create("spotify"),a=t.access_token,e.prev=2,e.next=5,fetch("https://api.spotify.com/v1/me/player/pause",{headers:{Accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},method:"PUT"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(){return e.apply(this,arguments)}}(),transferPlayback:function(){var e=Object(C.a)(j.a.mark(function e(t){var a,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.OAuth.create("spotify"),n=a.access_token,e.prev=2,e.next=5,fetch("https://api.spotify.com/v1/me/player/",{body:JSON.stringify({device_ids:[t],play:!1}),headers:{Accept:"application/json",Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},method:"PUT"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()}},x=a(60),A=a(210),I=a(211),L=a(111),P=a(212),D=a(213),U=a(214),F=a(215),B=(a(92),"https://calm-mesa-57338.herokuapp.com"),_={getOneEntry:function(e,t){return fetch("".concat(B,"/").concat(e,"/").concat(t)).then(function(e){return e.json()})},getAll:function(e){return fetch("".concat(B,"/").concat(e)).then(function(e){return e.json()})},postOne:function(e,t){return fetch("".concat(B,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},deleteEntry:function(e,t){return fetch("".concat(B,"/").concat(e,"/").concat(t),{method:"DELETE"}).then(function(e){return e.json()})},patchEntry:function(e,t,a){return fetch("".concat(B,"/").concat(e,"/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})},editEntry:function(e,t,a){return fetch("".concat(B,"/").concat(e,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputAnswer:"",correctAnswers:0,questionIndex:0,disableButton:!1,disableSubmitButton:!0},a.handleFieldChange=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.handleSubmit=function(e){var t=a.state.questionIndex;if(e.preventDefault(),""===a.state.inputAnswer)alert("Please enter an answer!");else{a.toggle("disableButton"),a.toggle("disableSubmitButton");var n=a.state.inputAnswer.toLowerCase(),r=a.props.quizTracks[t].name.toLowerCase(),s=e.target.parentNode;r.includes(n)&&n.length>=3?(alert("Correct, the answer is ".concat(a.props.quizTracks[t].name)),s.reset(),a.setState({questionIndex:a.state.questionIndex+1,correctAnswers:a.state.correctAnswers+1})):(alert("Sorry, the correct answer is ".concat(a.props.quizTracks[t].name)),a.setState({questionIndex:a.state.questionIndex+1}),s.reset())}},a.playSong=function(){var e=a.props.quizTracks.map(function(e){return e.uri}),t=a.props.quizTracks[0].startTime;N.put.startPlayback(e,t,a.props.deviceId)},a.toggle=function(e){a.setState(Object(x.a)({},e,!a.state[e]))},a.handleSeek=function(){var e=a.props.quizTracks[a.state.questionIndex].startTime;a.props.player.nextTrack().then(function(){a.props.player.seek(e)})},a.handlePlaySong=function(){0===a.state.questionIndex?a.playSong():a.handleSeek(),a.toggle("disableButton"),setTimeout(function(){a.props.player.pause(),a.toggle("disableSubmitButton")},a.props.clipLength)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){if(this.state.questionIndex===this.props.quizTracks.length){var e={quizId:parseInt(this.props.quizId),userId:parseInt(this.props.currentUser),score:100*this.state.correctAnswers/this.props.quizTracks.length};_.postOne("quizLogs",e),alert("Quiz Complete! You answered ".concat(this.state.correctAnswers," out of ").concat(this.props.quizTracks.length," questions correctly. ")),this.props.endQuiz()}}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(A.a,null,r.a.createElement("h2",{className:"display-4"},"Quiz Time"),r.a.createElement("p",{className:"lead"},"Click the play button to test your skills!"),r.a.createElement(I.a,{color:"primary",pill:!0},"Question ",this.state.questionIndex+1," of"," ",this.props.quizTracks.length),r.a.createElement(I.a,{color:"primary",pill:!0},"Current Score: ",this.state.correctAnswers),r.a.createElement("hr",{className:"my-2"}),r.a.createElement(L.a,{onClick:this.handlePlaySong,disabled:this.state.disableButton},"Play song!"),r.a.createElement(P.a,null,r.a.createElement(D.a,{row:!0},r.a.createElement(U.a,{for:"inputAnswer",sm:3},"What song is this?"),r.a.createElement(v.a,{sm:9},r.a.createElement(F.a,{type:"text",onChange:this.handleFieldChange,name:"text",id:"inputAnswer",placeholder:"Enter your guess!"}))),r.a.createElement(L.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmitButton},"Submit"))))}}]),t}(n.Component),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={quizzes:[],selectedQuiz:1},a.handleFieldChange=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.handleStart=function(e){e.preventDefault(),a.props.selectQuiz(a.state.selectedQuiz)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAll("quizs");case 2:t=e.sent,this.setState({quizzes:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement("h2",null," Lets play a quiz! "))),r.a.createElement(P.a,null,r.a.createElement(D.a,{row:!0},r.a.createElement(U.a,{for:"selectedQuiz"},"Select Quiz"),r.a.createElement(F.a,{type:"select",name:"select",id:"selectedQuiz",onChange:this.handleFieldChange,default:"1"},this.state.quizzes.map(function(e){return r.a.createElement("option",{className:"option-text",value:e.id,key:e.id},e.quizName)}))),r.a.createElement(L.a,{onClick:this.handleStart},"Click Me to Start the Quiz!")))}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={quizTracks:[],offset:0,startQuiz:!1,clipLength:""},a.selectQuiz=function(e){_.getOneEntry("quizs",e).then(function(t){for(var n=t.quizTrackIds,r=[];0!==n.length;){var s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}a.setState({quizTracks:r,startQuiz:!0,quizDescription:t.quizDescription,clipLength:t.clipLength,quizName:t.quizName,quizId:e})})},a.endQuiz=function(){a.setState({startQuiz:!1,quizTracks:[]})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},!this.state.startQuiz&&r.a.createElement(J,{selectQuiz:this.selectQuiz}),this.state.startQuiz&&r.a.createElement(M,{endQuiz:this.endQuiz,quizTracks:this.state.quizTracks,deviceId:this.props.deviceId,player:this.props.player,clipLength:this.state.clipLength,currentUser:this.props.currentUser,quizId:this.state.quizId})))}}]),t}(n.Component),R=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("h2",null," Hey bro...what song is this? "),r.a.createElement("div",null,r.a.createElement(W,{access_token:this.props.access_token,deviceId:this.props.deviceId,player:this.props.player,currentUser:this.props.currentUser}))))}}]),t}(n.Component),H=(a(144),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.preventDefault(),window.OAuth.initialize("rKtNmq0HtvZws6tMLOJFcXiyypo"),window.OAuth.popup("spotify",{cache:!0}).done(function(e){console.log("loggedIn"),e.me().done(function(e){var t=e.name,n=a.props.users.find(function(e){return e.spotifyUsername===t});if(n)a.props.setLoginStatus(!0,n.id),sessionStorage.setItem("currentUser",n.id);else{var r={spotifyUsername:t,displayName:t};_.postOne("users",r).then(function(){_.getAll("users").then(function(e){var n=e.find(function(e){return e.spotifyUsername===t});sessionStorage.setItem("currentUser",n.id),a.props.setLoginStatus(!0,n.id)})})}})})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){e.userLoggedIn!==this.props.userLoggedIn&&this.props.history.push("/home")}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("h1",null,"Welcome to Common Ground"),r.a.createElement("h3",null,"Please log in to continue"),r.a.createElement(L.a,{onClick:this.handleClick,size:"lg","bg-color":"primary"},r.a.createElement("span",{className:"fa fa-spotify"})," Sign in with Spotify"))}}]),t}(n.Component)),K=Object(w.e)(H),Y=a(216),G=a(118),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={disableButton:!1},a.handleClick=function(e){a.setState({disableButton:!0}),a.props.addToQuiz(a.props.track)},a.handleDelete=function(e){a.setState({disableButton:!1}),a.props.removeFromQuiz(a.props.track)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.track,t=e.album.name,a=Object(G.a)(e.artists,1)[0].name,n=e.name;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},this.props.index),r.a.createElement("td",null,n),r.a.createElement("td",null,a),r.a.createElement("td",{className:"text-center"},t),r.a.createElement("td",{className:"text-right"},r.a.createElement(L.a,{disabled:this.state.disableButton,onClick:this.handleClick,className:"btn-icon",color:"success",size:"sm"},r.a.createElement("i",{className:"tim-icons icon-alert-circle-exc"}))," ",r.a.createElement(L.a,{onClick:this.handleDelete,disabled:!this.state.disableButton,className:"btn-icon",color:"danger",size:"sm"},r.a.createElement("i",{className:"tim-icons icon-simple-delete"}))))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={playlistTracks:[]},a.handleClick=function(){a.props.addToQuiz(a.state.playlistTracks)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.get.getPlaylistTracks(this.props.playlist.URI).then(function(t){e.setState({playlistTracks:t})})}},{key:"componentDidUpdate",value:function(e){var t=this;e.playlist!==this.props.playlist&&N.get.getPlaylistTracks(this.props.playlist.URI).then(function(e){t.setState({playlistTracks:e})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.playlist.name)," ",r.a.createElement(L.a,{onClick:this.handleClick},"Add all songs"),r.a.createElement(Y.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Artist"),r.a.createElement("th",{className:"text-center"},"Album"),r.a.createElement("th",{className:"text-right"},"Add or remove tracks"))),r.a.createElement("tbody",null,this.state.playlistTracks.map(function(t,a){return r.a.createElement(V,{key:t.id,index:a+1,track:t,addToQuiz:e.props.addToQuiz,removeFromQuiz:e.props.removeFromQuiz})}))))}}]),t}(n.Component),Z=a(223),$=a(224),ee=a(225),te=a(226),ae=(a(64),a(218)),ne=a(220),re=a(219),se=a(221),ie=a(222),ce=a(227),oe=a(217),le=(a(93),a(94),a(51)),ue=Object(le.a)(le.b),pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,showSlider:!0,saveButton:!0,alertColor:"danger",isPlaying:!1,shouldPause:!1},a.log=function(e){return a.secondsToMinutes(e)},a.onSliderChange=function(e){a.setState({value:e})},a.onAfterChange=function(e){var t=a.props.deviceId;console.log(e),a.state.isPlaying?(a.setState({isPlaying:!1,shouldPause:!1}),N.put.playOneSong(a.props.track.uri,1e3*a.state.value,t).then(setTimeout(function(){a.state.shouldPause||N.put.pauseSong()},a.props.clipLength))):(a.setState({isPlaying:!0,shouldPause:!0}),N.put.playOneSong(a.props.track.uri,1e3*a.state.value,t).then(setTimeout(function(){a.state.shouldPause&&(a.setState({isPlaying:!1,shouldPause:!1}),N.put.pauseSong())},a.props.clipLength)))},a.saveStartButton=function(){var e={album:a.props.track.album.name,artists:a.props.track.artists[0].name,id:a.props.track.id,name:a.props.track.name,startTime:1e3*a.state.value,uri:a.props.track.uri,duration:a.props.track.duration_ms};a.props.addTrackToQuiz(e),a.setState({showSlider:!a.state.showSlider,saveButton:!a.state.saveButton,alertColor:"success"})},a.msToMinutes=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},a.secondsToMinutes=function(e){var t=Math.floor(e/60),a=(e%60).toFixed(0);return t+":"+(a<10?"0":"")+a},a.msToSeconds=function(e){return Math.floor(e/1e3)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.get.spotifyTrackInfo(this.props.track.id).then(function(t){e.setState({value:t})})}},{key:"render",value:function(){return r.a.createElement(ce.a,{color:this.state.alertColor},r.a.createElement(oe.a,null,this.state.showSlider&&r.a.createElement(y.a,null,r.a.createElement(v.a,{xs:"1"},"0"),r.a.createElement(v.a,null,r.a.createElement(ue,{tipFormatter:this.log,tipProps:{overlayClassName:"foo"},value:this.state.value,min:0,max:this.msToSeconds(this.props.track.duration_ms),step:1,onChange:this.onSliderChange,onAfterChange:this.onAfterChange})),r.a.createElement(v.a,{sm:"2",md:"1"},this.msToMinutes(this.props.track.duration_ms))),r.a.createElement(y.a,{className:"song-name"},r.a.createElement(v.a,{xs:"8",md:"6"},this.props.track.name," - ",this.props.track.album.name),this.state.saveButton&&r.a.createElement(v.a,{xs:"6",md:"4"},r.a.createElement(L.a,{onClick:this.saveStartButton}," ","Save this start value"," ")," "),!this.state.saveButton&&r.a.createElement(v.a,{xs:"6",md:"4"},r.a.createElement(L.a,{onClick:this.saveStartButton}," ","Edit this value"," ")," "))))}}]),t}(n.Component),he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOption:12e3},a.handleOptionChange=function(e){var t=parseInt(e.target.value);a.setState({selectedOption:t}),a.props.changeClipLength(t)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,null,r.a.createElement(re.a,null,r.a.createElement(D.a,{tag:"fieldset"},r.a.createElement("legend",{className:"col-form-label"},"Select the clip length for your quiz:"),r.a.createElement(D.a,{check:!0,inline:!0,className:"form-check-radio"},r.a.createElement(U.a,{className:"form-check-label"},r.a.createElement(F.a,{type:"radio",name:"clipLength",id:"clipLength1",value:6e3,checked:6e3===this.state.selectedOption,onChange:this.handleOptionChange}),"6 Seconds",r.a.createElement("span",{className:"form-check-sign"}))),r.a.createElement(D.a,{check:!0,inline:!0,className:"form-check-radio"},r.a.createElement(U.a,{className:"form-check-label"},r.a.createElement(F.a,{type:"radio",name:"clipLength",id:"clipLength2",value:12e3,checked:12e3===this.state.selectedOption,onChange:this.handleOptionChange}),"12 Seconds",r.a.createElement("span",{className:"form-check-sign"}))),r.a.createElement(D.a,{check:!0,inline:!0,className:"form-check-radio"},r.a.createElement(U.a,{className:"form-check-label"},r.a.createElement(F.a,{type:"radio",name:"clipLength",id:"clipLength3",value:24e3,checked:24e3===this.state.selectedOption,onChange:this.handleOptionChange}),"24 Seconds",r.a.createElement("span",{className:"form-check-sign"})))))))}}]),t}(n.Component),de=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={quizName:"",quizDescription:"",clipLength:12e3,newQuizTracks:[],currentUser:1},a.handleFieldChange=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.addTrackToQuiz=function(e){var t=a.state.newQuizTracks.concat(e);a.setState({newQuizTracks:t})},a.submitNewQuiz=function(e){if(e.preventDefault(),""===a.state.quizName)alert("Please enter a name for your quiz");else if(a.state.newQuizTracks.length<6)alert("Add more songs to your quiz");else{var t={userId:1,quizName:a.state.quizName,quizDescription:a.state.quizDescription,quizTrackIds:a.state.newQuizTracks,clipLength:a.state.clipLength};_.postOne("quizs",t),alert("".concat(a.state.quizName," has been created!")),a.props.clearQuizTracks(),e.target.parentNode.reset(),a.props.hideTracks()}},a.changeClipLength=function(e){a.setState({clipLength:e})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ae.a,null,r.a.createElement(ne.a,{tag:"h3"},"Quiz Creator"),r.a.createElement(re.a,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{sm:"12",md:{size:10,offset:1}},r.a.createElement(se.a,null,'The quiz creator allows you to import any song off of Spotify into your quiz. The easiest way to add songs is to create a playlist on Spotify, then add the entire playlist at once by clicking the "Add All" button below. You can change the difficulty of the quiz by making the song clips 6, 12, or 24 seconds long. You can use the slider next to each track to adjust the starting time for each song, or leave it as is to have the song start at the beginning.'," "))),r.a.createElement("hr",null),r.a.createElement(P.a,null,r.a.createElement(y.a,{form:!0},r.a.createElement(v.a,{md:4},r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizName"},"Quiz Name"),r.a.createElement(F.a,{type:"text",name:"quizName",id:"quizName",placeholder:"New Quiz",onChange:this.handleFieldChange}))),r.a.createElement(v.a,{md:7},r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizDescription"},"Quiz Description"),r.a.createElement(F.a,{type:"text",name:"text",id:"quizDescription",onChange:this.handleFieldChange})))),r.a.createElement(y.a,null,r.a.createElement(he,{changeClipLength:this.changeClipLength})),r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizSongs"},"Quiz Songs:"),r.a.createElement(ie.a,{id:"quizSongs"},this.props.quizTracks.map(function(t){return r.a.createElement(pe,{key:t.id,track:t,clipLength:e.state.clipLength,addTrackToQuiz:e.addTrackToQuiz,deviceId:e.props.deviceId})}))),r.a.createElement(L.a,{onClick:this.submitNewQuiz},"Submit New Quiz"))))}}]),t}(n.Component),me=(Object(le.a)(le.b),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,showSlider:!1,saveButton:!1,alertColor:"success",isPlaying:!1,shouldPause:!1},a.msToMinutes=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},a.secondsToMinutes=function(e){var t=Math.floor(e/60),a=(e%60).toFixed(0);return t+":"+(a<10?"0":"")+a},a.msToSeconds=function(e){return Math.floor(e/1e3)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(ce.a,{color:this.state.alertColor},r.a.createElement(oe.a,null,r.a.createElement(y.a,{className:"song-name"},r.a.createElement(v.a,{xs:"8",md:"6"},this.props.track.name," - ",this.props.track.album),!this.state.saveButton&&r.a.createElement(v.a,{xs:"6",md:"4"},r.a.createElement(L.a,null," ","Edit this value"," ")," "))))}}]),t}(n.Component)),fe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={quizName:"",quizDescription:"",clipLength:12e3,newQuizTracks:[],myQuizzes:[],showEditForm:!1,selectedQuiz:1},a.showEditForm=function(){var e=a.state.myQuizzes.find(function(e){return e.id==a.state.selectedQuiz});a.setState({quizName:e.quizName,quizDescription:e.quizDescription,clipLength:e.clipLength,newQuizTracks:e.quizTrackIds,showEditForm:!0})},a.handleFieldChange=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.addTrackToQuiz=function(e){var t=a.state.newQuizTracks.concat(e);a.setState({newQuizTracks:t})},a.addEditedTrack=function(e,t){var n=a.state.newQuizTracks.find(function(t){return t.id===e}),r=a.state.newQuizTracks.filter(function(e){return e!==n}).concat(t);a.setState({newQuizTracks:r})},a.removeTrack=function(e){var t=a.state.newQuizTracks.find(function(t){return t.id===e}),n=a.state.newQuizTracks.filter(function(e){return e!==t});a.setState({newQuizTracks:n})},a.submitEditedQuiz=function(e){if(e.preventDefault(),""===a.state.quizName)alert("Please enter a name for your quiz");else if(a.state.newQuizTracks.length<6)alert("Add more songs to your quiz");else{var t={quizName:a.state.quizName,quizDescription:a.state.quizDescription,quizTrackIds:a.state.newQuizTracks,clipLength:a.state.clipLength};_.patchEntry("quizs",a.state.selectedQuiz,t),alert("".concat(a.state.quizName," has been edited!")),a.props.clearQuizTracks(),e.target.parentNode.reset(),a.props.hideTracks()}},a.deleteQuiz=function(){window.confirm("Are you sure you want to delete the quiz?")&&_.deleteEntry("quizs",a.state.selectedQuiz).then(function(){alert("Quiz has been deleted."),a.props.hideTracks(),a.props.clearQuizTracks()})},a.changeClipLength=function(e){a.setState({clipLength:e})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAll("quizs?userId=".concat(this.props.currentUser));case 2:t=e.sent,this.setState({myQuizzes:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(P.a,null,r.a.createElement(D.a,{row:!0},r.a.createElement(U.a,{for:"selectedQuiz"},"Select Quiz"),r.a.createElement(F.a,{type:"select",name:"select",id:"selectedQuiz",onChange:this.handleFieldChange,default:1},this.state.myQuizzes.map(function(e){return r.a.createElement("option",{className:"option-text",value:e.id,key:e.id},e.quizName)}))),r.a.createElement(L.a,{onClick:this.showEditForm},"Edit this quiz."))),this.state.showEditForm&&r.a.createElement(ae.a,null,r.a.createElement(ne.a,{tag:"h3"},"Quiz Editor"),r.a.createElement(re.a,null,r.a.createElement(P.a,null,r.a.createElement(y.a,{form:!0},r.a.createElement(v.a,{md:4},r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizName"},"Quiz Name"),r.a.createElement(F.a,{type:"text",name:"quizName",id:"quizName",value:this.state.quizName,onChange:this.handleFieldChange}))),r.a.createElement(v.a,{md:7},r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizDescription"},"Quiz Description"),r.a.createElement(F.a,{type:"text",name:"text",id:"quizDescription",onChange:this.handleFieldChange,value:this.state.quizDescription})))),r.a.createElement(y.a,null,r.a.createElement(he,{changeClipLength:this.changeClipLength})),r.a.createElement(D.a,null,r.a.createElement(U.a,{for:"quizSongs"},"Quiz Songs:"),r.a.createElement(ie.a,{id:"quizSongs"},this.state.newQuizTracks.map(function(t){return r.a.createElement(me,{key:t.id,addEditedTrack:e.addEditedTrack,track:t,clipLength:e.state.clipLength,removeTrack:e.removeTrack,addTrackToQuiz:e.addTrackToQuiz,deviceId:e.props.deviceId})}),this.props.quizTracks.map(function(t){return r.a.createElement(pe,{key:t.id,track:t,clipLength:e.state.clipLength,addTrackToQuiz:e.addTrackToQuiz,deviceId:e.props.deviceId})}))),r.a.createElement(L.a,{onClick:this.submitEditedQuiz},"Submit Edited Quiz")," ",r.a.createElement(L.a,{onClick:this.deleteQuiz},"Delete this quiz")))))}}]),t}(n.Component),ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={playlistInfo:[],dropdownOpen:!1,showTracks:!1,activePlaylist:"",quizTracks:[],renderQuizCreator:!0,renderQuizEditor:!1},a.toggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.toggleEditor=function(){a.setState({renderQuizCreator:!a.state.renderQuizCreator,renderQuizEditor:!a.state.renderQuizEditor})},a.showTracks=function(e,t){a.setState({showTracks:!0,activePlaylist:e}),a.toggle()},a.hideTracks=function(){a.setState({showTracks:!1})},a.addToQuiz=function(e){var t=a.state.quizTracks.concat(e);a.setState({quizTracks:t})},a.removeFromQuiz=function(e){var t=a.state.quizTracks.filter(function(t){return t!==e});a.setState({quizTracks:t})},a.clearQuizTracks=function(){a.setState({quizTracks:[],renderQuizEditor:!1,renderQuizCreator:!0})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get.getUserPlaylists();case 2:t=e.sent,a=t.map(function(e){return{name:e.name,URI:e.id}}),this.setState({playlistInfo:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.showTracks;return r.a.createElement(m.a,{className:"App"},r.a.createElement(L.a,{onClick:this.toggleEditor,id:"renderQuizCreator",color:"primary",size:"lg"},"Create a New Quiz")," ",r.a.createElement(L.a,{onClick:this.toggleEditor,id:"renderQuizEditor",color:"secondary",size:"lg"},"Edit a previous quiz"),this.state.renderQuizCreator&&r.a.createElement(de,{currentUser:this.props.currentUser,deviceId:this.props.deviceId,quizTracks:this.state.quizTracks,clearQuizTracks:this.clearQuizTracks,hideTracks:this.hideTracks}),this.state.renderQuizEditor&&r.a.createElement(fe,{deviceId:this.props.deviceId,quizTracks:this.state.quizTracks,clearQuizTracks:this.clearQuizTracks,hideTracks:this.hideTracks,removeFromQuiz:this.removeFromQuiz,currentUser:this.props.currentUser}),r.a.createElement(Z.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement($.a,{caret:!0},"Playlists"),r.a.createElement(ee.a,null,this.state.playlistInfo.map(function(t){var a=e.showTracks.bind(e,t);return r.a.createElement(te.a,{key:t.URI,onClick:a},t.name)}))),t&&r.a.createElement(X,{addToQuiz:this.addToQuiz,removeFromQuiz:this.removeFromQuiz,playlist:this.state.activePlaylist}))}}]),t}(n.Component),ye=a(117),ve=function(e){var t=e.path,a=e.Destination,n=Object(ye.a)(e,["path","Destination"]);return r.a.createElement(w.b,{exact:!0,path:t,render:function(e){return null!==localStorage.getItem("oauthio_cache")?r.a.createElement(a,Object.assign({},e,n)):r.a.createElement(w.a,{to:"/login"})}})},ke=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputName:"",displayName:""},a.handleFieldChange=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.handleSubmit=function(e){var t=e.target.parentNode;_.patchEntry("users",a.props.currentUser,{displayName:a.state.inputName}).then(function(){_.getOneEntry("users",a.props.currentUser).then(function(e){a.setState({displayName:e.displayName}),t.reset()})})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.getOneEntry("users",this.props.currentUser).then(function(t){e.setState({displayName:t.displayName})})}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("h1",null,this.state.displayName,"'s Profile"),r.a.createElement(P.a,null,r.a.createElement(D.a,{row:!0},r.a.createElement(U.a,{for:"inputName",sm:3},"Edit your display name:"),r.a.createElement(v.a,{sm:9},r.a.createElement(F.a,{type:"text",onChange:this.handleFieldChange,name:"text",id:"inputName"}))),r.a.createElement(L.a,{onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),Ee={waitForSpotifyWebPlaybackSDKToLoad:function(){var e=Object(C.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.Spotify?e(window.Spotify):window.onSpotifyWebPlaybackSDKReady=function(){e(window.Spotify)}}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),sPlayer:function(){var e=Object(C.a)(j.a.mark(function e(){var t,a,n,r,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.OAuth.create("spotify"),e.next=3,t.access_token;case 3:return a=e.sent,e.next=6,this.waitForSpotifyWebPlaybackSDKToLoad();case 6:return n=e.sent,r=n.Player,s=new r({name:"Quiz Player",volume:1,getOAuthToken:function(e){e(a)}}),e.next=11,s.connect();case 11:return e.sent&&console.log("yeah"),s.addListener("ready",function(){var e=Object(C.a)(j.a.mark(function e(t){var a,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.device_id,e.next=3,N.put.transferPlayback(a);case 3:(n=document.querySelector('iframe[src="https://sdk.scdn.co/embedded/index.html"]'))&&(n.style.display="block",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px"),console.log("ready");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",s);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={access_token:"",userLoggedIn:!1,currentUser:"",deviceId:"",users:[]},a.setLoginStatus=function(e,t){a.setState({userLoggedIn:e,currentUser:t});var n=window.OAuth.create("spotify").access_token;sessionStorage.setItem("access_token",n),a.setState({access_token:n}),Ee.sPlayer().then(function(e){a.setState({player:e,deviceId:e._options.id})})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.getAll("users").then(function(t){e.setState({users:t})}),null!==localStorage.getItem("oauthio_cache")&&!1===this.state.userLoggedIn&&this.setLoginStatus(!0,parseInt(sessionStorage.getItem("currentUser")))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{exact:!0,path:"/",render:function(t){return e.state.userLoggedIn?r.a.createElement(w.a,{to:"/home"}):r.a.createElement(w.a,{to:"/login"})}}),r.a.createElement(ve,{path:"/home",Destination:R,userLoggedIn:this.state.userLoggedIn,player:this.state.player,access_token:this.state.access_token,deviceId:this.state.deviceId}),r.a.createElement(w.b,{path:"/login",render:function(){return r.a.createElement(K,{userLoggedIn:e.state.userLoggedIn,setLoginStatus:e.setLoginStatus,users:e.state.users,currentUser:e.state.currentUser})}}),r.a.createElement(ve,{path:"/create",Destination:ge,access_token:this.state.access_token,deviceId:this.state.deviceId,currentUser:this.state.currentUser,player:this.state.player}),r.a.createElement(ve,{path:"/quiz",Destination:W,access_token:this.state.access_token,deviceId:this.state.deviceId,player:this.state.player}),r.a.createElement(ve,{path:"/profile",Destination:ke,currentUser:this.state.currentUser}))}}]),t}(n.Component),be=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,null),r.a.createElement(ze,null))}}]),t}(n.Component);a(199);i.a.render(r.a.createElement(h.a,null,r.a.createElement(be,null)),document.getElementById("root"))},64:function(e,t,a){},92:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.a2e762ae.chunk.js.map